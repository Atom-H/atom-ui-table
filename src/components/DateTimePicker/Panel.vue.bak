<template>
    <div class="panel">
        <h1>{{xx}}</h1>
        <div class="weekdays">
            <span class="weekday" v-for="weekday in weekdays">{{weekday}}</span>
        </div>
        <div class="days">
            <span class="day" v-for="item in d">{{item}}</span>
        </div>
    </div>
</template>
<script>
import moment from 'moment'
export default {
    name: 'DateTimePickPanel',

    props: {
        value: {
            type: String
        }
    },

    data() {
        return {
            weekdays: ['日', '一', '二', '三', '四', '五', '六'],
            xx: null,
            m: 3
        };
    },

    computed: {
        d() {
            moment.locale('zh-cn');
            // Moment.locale('zh-cn');
            // moment.utc(8);
            var dates = [];
            var time = moment.utc({
                y: 2017,
                M: this.m,
                d: 25,
                h: 0,
                m: 0,
                s: 0
            });

            

            var count = 0;
            var activeDate = moment(time);
            // 本月第一天
            var activeBeginDate = moment(time).startOf('month');
            // 本月最后一天
            var activeEndDate = moment(time).endOf('month');
            // 上个月最后一天
            var lastEndDate = moment(activeBeginDate).subtract(1, 'day');


            var lastEndDateWeeks = lastEndDate.day()

            // 上个月的几天
            for (var i = 0; i <= lastEndDateWeeks; i++) {
                var date = lastEndDate.date() - i;
                dates.splice(0, 0, date);
                count++;
            }

            // 本月的日期
            for (var j = 1; j <= activeEndDate.date(); j++) {
                dates.push(j);
                count++;
            }


            var nextBeginDate = moment(activeEndDate).add(1, 'day');

            // 下个月的几天
            var whichWeek = nextBeginDate.day();
            if (0 < whichWeek) {
                for (var k = 1; k <= 42 - count; k++) {
                    dates.push(k);
                }
            }

            return dates;
            // this.d = moment().utcOffset(0).endOf('month');
        }
    },

    destroyed() {

    }
}
</script>
<style scoped lang="scss">
@import '../../scss/theme.scss';
$size : 36px;
.panel {
    box-shadow: 1px 2px 3px rgba(0, 0, 0, .1), -1px -2px 3px rgba(0, 0, 0, .1);
    margin: 15px;
    padding: 10px;
    overflow: hidden;
    display: inline-block;
    .weekdays {
        width: $size * 7;
        .weekday {
            width: $size;
            height: $size;
            line-height: $size;
            display: inline-block;
            text-align: center;
            font-size: 12px;
        }
    }
    .days {
        width: $size * 7;
        .day {
            transition: all .3s;
            width: $size;
            height: $size;
            line-height: $size;
            display: inline-block;
            text-align: center;
            font-size: 12px;
            &:hover {
                border-radius: 4px;
                background: $hover;
                cursor: pointer;
                color: $base;
            }
        }
    }
}
</style>
